/'v2 Схема'/
@startuml "ЦТС.А3.2 Добавление товара в Каталог"
/'Название файла будет: ЦТС.<Номер схемы БП>.<Номер этапа>.<Название этапа в схеме БП>'/
title "ЦТС.А3.2. Добавление товара в Каталог"
actor "Участник Торгов" as User
boundary "Карточка товара" as Commodities
database "База данных" as Database
participant "Менеджер торгов" as User_CTS
collections "Каталог Наименований товаров" as CommoditiesNames

autonumber
activate User
User -> Commodities: Ввести данные Наименование товара
note right
    manual:  Классификатор товара, Вид товара, Лот, Размер лота, Регион поставки, Базис поставки, Завод-производитель, Упаковка, Описание товара
    Перечень берживых товаров (табличная часть);
    auto: Проверка введённого наименования на наличие в Каталоге, Мнемоника, Краткое наименование товара, Статус, Дата создания, Автор.
end note
deactivate User

Commodities --> Database: Запрос в БД 
    activate Database
    /'Проверка корректно заполненных данных Каталог наименования товара->Участник Торгов'/
    Database -> Commodities: Проверка корректно заполненных данных
    deactivate Database
    Commodities --> User: Ошибка! Неправильные введены данные! Не заполнены обязательные поля
    activate User
    /'Ошибка и т.д. в Каталог наименования товара->Участник Торгов'/
    User-->Commodities: Корректировка ранее введенных данных
    deactivate User
    User->User_CTS: Запросы на добавления товара в Каталог наименования товара 
        /'Администратор Торгов'/
        activate User_CTS
        User_CTS->User_CTS: Проверка корректно заполненных данных
        User_CTS->User: Отказ
    note right
         manual: Причина отказа
    end note

    User_CTS-->Database: Утверждение
     deactivate User_CTS

     activate Database
    note left
         auto: Запись наименования в БД
    end note    
    Database--> CommoditiesNames: Запись нового наименования в Каталог наименований
    deactivate Database
        CommoditiesNames-->User: Наименование доступно для выбора в Карточке товара
    activate User
    User-->Commodities: Корректировка ранее введенных данных
    deactivate User    
    deactivate User 
    Commodities->Database: Сохранение данных в базе данных
@enduml